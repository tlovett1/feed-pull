!function(a,b,c){"use strict";var d=function(){function d(){function d(){return s.find("tr").last().attr("data-mapping-row-id")}function e(){return q.find("tr").last().attr("data-namespace-row-id")}function f(){a(this).parents("tr").fadeOut().remove()}function g(){function b(){a(this).remove(),q.find("tr").length<1&&p.hide()}a(this).parents("tr").fadeOut(400,b)}function h(){var a=parseInt(d())+1,c=b.template(A,{rowID:a});s.append(c)}function i(){var a=parseInt(e())+1,c=b.template(B,{rowID:a,namespace_prefix:"",namespace_url:""});q.append(c),p.show()}function j(){v.hide(),v.html(""),w.hide(),w.html(""),y.animate({opacity:1}),a.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"pull",nonce:c.pull_nonce,source_feed_id:x.val()}}).always(function(a){a&&"undefined"!=typeof a.success&&(w.html(a.message),w.fadeIn("fast")),y.animate({opacity:0})})}function k(){v.hide(),v.html(""),y.animate({opacity:1}),a.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"pull_test",nonce:c.pull_nonce,source_feed_id:x.val()}}).always(function(a){a&&"undefined"!=typeof a.success&&(v.html(a.message),v.fadeIn("fast")),y.animate({opacity:0})})}function l(){a.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"get_namespaces",nonce:c.get_namespaces_nonce,feed_url:z.val()}}).done(function(d){if(z.val()!==C)if(d.namespaces&&"undefined"!=typeof d.namespaces[""]){o.html(c.unprefixed_root_namespace);var f=!0;if(q.find("input[type=text]").each(function(){("default"==a(this).val()||a(this).val()==d.namespaces[""])&&(f=!1)}),f){var g=parseInt(e())+1,h=b.template(B,{rowID:g,namespace_prefix:"default",namespace_url:d.namespaces[""]});q.append(h),p.show()}}else o.html(c.prefixed_root_namespace)}).always(function(){C=z.val()})}var m=a("#fp_field_mapping"),n=a("#fp_source_details"),o=n.find(".custom-namespaces-description"),p=n.find("table"),q=p.find("tbody"),r=m.find("table"),s=r.find("tbody"),t=a("#fp_manual_pull_run"),u=a("#fp_manual_pull_test"),v=a("#fp_manual_content"),w=a("#fp_log .inside"),x=a("#post_ID"),y=a("#fp-spinner"),z=a("#fp_feed_url"),A=a("#mapping-row-template").html(),B=a("#namespace-row-template").html(),C=(a("#log-item-template").html(),null);l(),r.on("click","input.delete",f),m.on("click","input.add-new",h),p.on("click","input.delete",g),n.on("click","input.add-new",i),z.on("blur",l),t.on("click",j),u.on("click",k)}function e(){return null===f&&(f=new d),f}var f=null;return{getInstance:e}}();d.getInstance()}(jQuery,_,FP_Settings,window);